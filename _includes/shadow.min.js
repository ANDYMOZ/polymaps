var po=org.polymaps,svg=n$("#map").add("svg:svg"),map=po.map().container($n(svg)).center({lat:37.787,lon:-122.228}).zoom(12).add(po.interact());map.add(po.image().url(po.url("http://{S}tile.cloudmade.com/1a1b06b230af4efdbb989ea99e9841af/998/256/{Z}/{X}/{Y}.png").hosts(["a.","b.","c.",""])));map.add(po.geoJson().features([{geometry:{coordinates:[-122.258,37.805],type:"Point"}}]).on("load",load));map.add(po.compass().pan("none"));
svg.add("svg:filter").attr("id","shadow").attr("width","140%").attr("height","140%").add("svg:feGaussianBlur").attr("in","SourceAlpha").attr("stdDeviation",3);svg.add("svg:radialGradient").attr("id","r1").attr("fx",0.5).attr("fy",0.9).add("svg:stop").attr("offset","0%").attr("stop-color","#00bf17").parent().add("svg:stop").attr("offset","100%").attr("stop-color","#0f2f13");
svg.add("svg:radialGradient").attr("id","r2").attr("fx",0.5).attr("fy",0.1).add("svg:stop").attr("offset","0%").attr("stop-color","#cccccc").parent().add("svg:stop").attr("offset","100%").attr("stop-color","#cccccc").attr("stop-opacity",0);
function load(d){for(var b=20*Math.pow(2,d.tile.zoom-12),e=0;e<d.features.length;e++){var a=n$(d.features[e].element),c=a.parent().add("svg:g",a);c.attr("transform","translate("+a.attr("cx")+","+a.attr("cy")+")");c.add("svg:circle").attr("r",b).attr("transform","translate("+b+",0)skewX(-45)").attr("opacity",0.5).attr("filter","url(#shadow)");c.add(a.attr("fill","url(#r1)").attr("r",b).attr("cx",null).attr("cy",null));c.add("svg:circle").attr("transform","scale(.95,1)").attr("fill","url(#r2)").attr("r",
b)}};
