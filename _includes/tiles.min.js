var po=org.polymaps,div=document.getElementById("map"),svg=div.appendChild(po.svg("svg")),g=svg.appendChild(po.svg("g")),map=po.map().container(g).tileSize({x:128,y:128}).angle(0.3).add(po.interact()).on("resize",resize);resize();map.add(po.layer(grid));var rect=g.appendChild(po.svg("rect"));rect.setAttribute("width","50%");rect.setAttribute("height","50%");
function resize(){if(!resize.ignore){var b=div.clientWidth/2,a=div.clientHeight/2;g.setAttribute("transform","translate("+b/2+","+a/2+")");resize.ignore=true;map.size({x:b,y:a});resize.ignore=false}}
function grid(b){var a=b.element=po.svg("g"),c=a.appendChild(po.svg("rect")),d=map.tileSize();c.setAttribute("width",d.x);c.setAttribute("height",d.y);a=a.appendChild(po.svg("text"));a.setAttribute("x",6);a.setAttribute("y",6);a.setAttribute("dy",".71em");a.appendChild(document.createTextNode(b.key))}var spin=0;setInterval(function(){spin&&map.angle(map.angle()+spin)},30);
function key(b){switch(b.keyCode){case 65:spin=b.type=="keydown"?-0.0040:0;break;case 68:spin=b.type=="keydown"?0.0040:0;break}}window.addEventListener("keydown",key,true);window.addEventListener("keyup",key,true);window.addEventListener("resize",resize,false);
